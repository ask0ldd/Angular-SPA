<!-- 
    ngif : helps to get rid of the alert thrown when trying to access editedRetal.description that could be undef
    #rentalForm="ngform" : https://angular.io/guide/template-reference-variables#using-ngform-with-template-variables
    since #rentalForm="ngform" rentalForm template reference is not <form> but the ngForm directive 
-->
<form *ngIf="editedRental" (ngSubmit)="onSubmit()" #rentalForm="ngForm"> 

    <section class="galleryContainer">
        <label>Gallerie</label> <!-- switch to hx -->
        <div class="gallery">
            <figure style="position:relative;" *ngFor="let img of editedRental.pictures">
                <img [src]="img"/>
                <div (click)="deleteImg(img)" class="delImgButton" role="button">X</div>
            </figure>
            <article>
                <input class="delButton" style="height:40px; width: 41px;" type="button" value="+"/>
                <span>Click to Add</span>
                <span>A new Picture</span>
            </article>
        </div>
    </section>
    
    <!-- title.valid & title.pristine refer to #title -->
    <div class="labelErrorContainer"><label for="title">Title</label><p [hidden]="title.valid || title.pristine" class="errorMessage">Error Message</p></div>
    <input id="title" name="title" pattern="^[a-zA-Z0-9èéàïîêôöùûç',;. -]{1,50}$"
    [(ngModel)]="editedRental.title" 
    #title="ngModel" required/>

    <div class="labelErrorContainer"><label for="location">Location</label><p [hidden]="location.valid || location.pristine" class="errorMessage">Error Message</p></div>
    <input id="location" name="location" pattern="^[a-zA-Z0-9èéàïîêôöùûç',;. -]{1,30}$"
    [(ngModel)]="editedRental.location"
    #location="ngModel" required/>

    <div class="labelErrorContainer"><label for="description">Description</label><p [hidden]="description.valid || description.pristine" class="errorMessage">Error Message</p></div>
    <input id="description" name="description" pattern="^[a-zA-Z0-9èéàïîêôöùûç',;. -]{1,400}$"
    [(ngModel)]="editedRental.description" 
    #description="ngModel" required/>

    <!-- 
        the [(ngModel)] syntax is used to bind the value of the input field to the name property of the component. 
        ie : bind input.value to component.property aka this.property
        The [] syntax is used for one-way data binding, while the () syntax is used for event binding. 
        The combination of [] and () is used for two-way data binding
    -->

    <div style="display: flex; flex-direction: row; column-gap: 4rem;">
        <div style="display: flex; flex-direction: column; flex:1 1 50%; row-gap: 1rem;">
            <label>Equipements</label> <!-- switch to hx -->
            <div style="display:flex; width: 100%; flex-direction: row; column-gap: 1rem;" *ngFor="let equipment of editedRental.equipments; let i = index">
                <input readonly style="display:flex; width: 100%; flex-shrink: 1;" id="{{'equipement'+i.toString()}}" name="{{'equipement'+i.toString()}}" pattern="^[a-zA-Zèéàèïîêôöùûç -]{1,30}$"
                [(ngModel)]="editedRental.equipments[i]" required/>
                <input class="delButton" type="button" (click)="removeEquipment(editedRental.tags[i])" value="x"/>
            </div>
            <div style="display:flex; width: 100%; flex-direction: row; column-gap: 1rem;">
                <input (keyup.enter)="addEquipment(newEquipment.value)" id="newEquipment" name="newEquipment" style="display:flex; width: 100%; flex-shrink: 1;" #newEquipment/>
                <input class="delButton" type="button" (click)="addEquipment(newEquipment.value)" value="+"/>
            </div>
        </div>

        <div style="display: flex; flex-direction: column; flex:1 1 50%; row-gap: 1rem;">
            <label>Tags</label> <!-- switch to hx -->
            <div style="display:flex; width: 100%; flex-direction: row; column-gap: 1rem;" *ngFor="let tag of editedRental.tags; let i = index" id="{{'tag'+i.toString()}}">
                <input readonly style="display:flex; width: 100%; flex-shrink: 1;" name="{{'tag'+i.toString()}}" pattern="^[a-zA-Zèéàèïîêôöùûç -]{1,30}$"
                [(ngModel)]="editedRental.tags[i]" required/>
                <input class="delButton" type="button" (click)="removeTag(editedRental.tags[i])" value="x"/>
            </div>
            <div style="display:flex; width: 100%; flex-direction: row; column-gap: 1rem;">
                <input (keyup.enter)="addTag(newTag.value)" id="newTag" name="newTag" style="display:flex; width: 100%; flex-shrink: 1;" #newTag>
                <input class="delButton" type="button" (click)="addTag(newTag.value)" value="+"/>
            </div>
        </div>
    </div>

    <input type="button" class="saveButton" value="Sauvegarder les Modifications"/>
</form>
